<app-public-header></app-public-header>

<main class="container">

    <div class="col-mb-4 col-sm-12 rounded-3">
        <div class="container-fluid py-5">
            <div class="row flex-row-reverse">
                <div class="col-md-6  col-sm-12">
                    <!-- Carousel wrapper -->
                    <div id="carouselBasicExample" class="carousel slide carousel-fade mb-4" data-mdb-ride="carousel">
                        <!-- Indicators -->
                        <div class="carousel-indicators">
                            <button type="button" data-mdb-target="#carouselBasicExample" data-mdb-slide-to="0" class=""
                                aria-current="true" aria-label="Slide 1" class="active"></button>
                            <button type="button" data-mdb-target="#carouselBasicExample" data-mdb-slide-to="1" class=""
                                aria-current="true" aria-label="Slide 2"></button>
                            <button type=" button" data-mdb-target="#carouselBasicExample" data-mdb-slide-to="2"
                                class="" aria-current="true" aria-label="Slide 2"></button>
                        </div>

                        <!-- Inner -->
                        <div class="carousel-inner">
                            <!-- Single item -->

                            <div class="carousel-item " [ngClass]="{ 'active' : i==0 }"
                                *ngFor="let img of images; let i = index">
                                <img src="{{img}}" class="d-block w-100 rounded-3 shadow  " alt="..." width="500"
                                    height="500" />
                                <div class="carousel-caption d-none d-md-block">
                                </div>
                            </div>

                        </div>
                        <!-- Inner -->

                        <!-- Controls -->
                        <button class="carousel-control-prev" type="button" data-mdb-target="#carouselBasicExample"
                            data-mdb-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-mdb-target="#carouselBasicExample"
                            data-mdb-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>

                </div>
                <div class="col-md-6  col-sm-12 align-self-center">

                    <h1 class="display-3 fw-bold pb-1">{{recipes.title}}</h1>
                    <strong class=" pb-2">
                        <span class="text-primary">
                            <i class=" fa-star" [ngClass]="recipes.qualification>=0 ?'fas': 'far'"></i>
                            <i class=" fa-star" [ngClass]="recipes.qualification>=2 ?'fas': 'far'"></i>
                            <i class=" fa-star" [ngClass]="recipes.qualification>=3 ?'fas': 'far'"></i>
                            <i class=" fa-star" [ngClass]="recipes.qualification>=4 ?'fas': 'far'"></i>
                            <i class=" fa-star" [ngClass]="recipes.qualification>=5?'fas': 'far'"></i>
                        </span>
                    </strong>
                    <p class="lead  pb-3">{{recipes.description}}</p>
                    <!-- social media bootstrap -->

                    <!-- list ingredients -->
                    <div class="row">
                        <div class="col-md-12">
                            <ul class="list-group mb-3">
                                <li class="list-group-item" *ngFor="let ing of recipes.ingredients">{{ing.name}}</li>
                            </ul>
                        </div>
                    </div>
                    <!-- list ingredients -->

                    <button class="btn btn-primary btn-lg mb-3" type="button">Coment</button>
                </div>
            </div>

            <div class="row align-items-md-stretch">
                <div class="col-md-7">
                    <div class="h-100 p-5 bg-light  border rounded-3 shadow  p-3 mb-5 bg-primary !spacing">
                        <div class="row d-flex">
                            <div class="col-md-12 d-flex mb-3">
                                <h2 class="m-auto">Preparation</h2>
                                <button class="btn btn-outline-dark" type="button" data-mdb-toggle="modal"
                                    data-mdb-target="#exampleModal">Qualify</button>
                            </div>
                        </div>
                        <p>{{recipes.preparation}}
                            + Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae iure eaque reprehenderit
                            quae earum ducimus dolore libero eius sint deleniti, ullam voluptates, nobis, dicta
                            possimus! Similique necessitatibus id nobis neque?
                        </p>
                        <!-- Notes -->
                        <div class="row">
                            <div class="col-md-12">
                                <ul class="list-group mb-3">
                                    <li class="list-group-item">

                                        <h3 class="m-auto">Notes</h3>
                                        <p>{{recipes.notes}}</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class=" col-md-5">
                    <div class="h-100 p-5 bg-light border rounded-3 shadow  p-3 mb-5 bg-primary !spacing">
                        <h2>Comments</h2>

                        <div *ngFor="let comment of recipes.comments">
                            <div class="media d-flex">
                                <img src="https://mdbootstrap.com/img/Photos/Avatars/avatar-2.jpg"
                                    class="d-flex mx-3 rounded-circle img-fluid" alt="Generic placeholder image">
                                <div class="media-body">
                                    <h5 class="mt-0">
                                        {{comment.user==0?'Anonimo':comment.infoUser.name}}</h5>
                                    <p>{{comment.comment}}</p>
                                    <small>{{comment.create_at}}</small>
                                </div>
                            </div>
                            <hr>
                            <ng-container *ngIf="comment.response != '' && comment.response_at!=''">
                                <!-- Reponse comment -->
                                <div class="media d-flex flex-row-reverse">
                                    <img src="https://mdbootstrap.com/img/Photos/Avatars/avatar-8.jpg"
                                        class="d-flex mx-3 rounded-circle img-fluid" alt="Generic placeholder image">
                                    <div class="media-body">
                                        <h5 class="mt-0">{{recipes.user.name}}</h5>
                                        <p>{{comment.response}}</p>
                                        <small>{{comment.response_at}}</small>
                                    </div>
                                </div>
                                <hr>
                            </ng-container>
                        </div>

                        <p></p>
                        <!-- inpur for comments -->
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" placeholder="Comment"
                                aria-label="Recipient's username" aria-describedby="basic-addon2"
                                [(ngModel)]="comment.comment">
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary" type="button"
                                    (click)="onSubmitComment()">Send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- top calificatiÃ³n recipes-->


    <div class="modal top " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
        data-mdb-backdrop="true" data-mdb-keyboard="true">
        <div class="modal-dialog modal-sm  modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Qualify</h5>
                    <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <!-- qualify recipe stars-->
                    <div class="rating">
                        <p>Calificate this Recipe</p>
                        <strong>
                            <span class="rating d-flex p-0" data-toggle="rating" id="filter-rating" tabindex="0">

                                <strong class=" pb-2">
                                    <span class="text-primary">
                                        <i class=" fa-star" style="cursor:pointer"
                                            [ngClass]="qualification.qualification>0 ?'fas': 'far'"
                                            (click)="onSelectStars(1)"></i>
                                        <i class=" fa-star" style="cursor:pointer"
                                            [ngClass]="qualification.qualification>=2 ?'fas': 'far'"
                                            (click)="onSelectStars(2)"></i>
                                        <i class=" fa-star" style="cursor:pointer"
                                            [ngClass]="qualification.qualification>=3 ?'fas': 'far'"
                                            (click)="onSelectStars(3)"></i>
                                        <i class=" fa-star" style="cursor:pointer"
                                            [ngClass]="qualification.qualification>=4 ?'fas': 'far'"
                                            (click)="onSelectStars(4)"></i>
                                        <i class=" fa-star" style="cursor:pointer"
                                            [ngClass]="qualification.qualification>=5?'fas': 'far'"
                                            (click)="onSelectStars(5)"></i>
                                    </span>
                                </strong>
                            </span>
                        </strong>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-mdb-dismiss="modal">
                        Cancel
                    </button>
                    <button type="button" class="btn btn-primary" data-mdb-dismiss="modal"
                        (click)="onSubmitQualification()">Save
                        Qualify</button>
                </div>
            </div>
        </div>
    </div>






</main>
<!-- Footerc cool mdbootstrap -->
<!-- Footer -->

<app-public-footer></app-public-footer>
<!-- Footer -->